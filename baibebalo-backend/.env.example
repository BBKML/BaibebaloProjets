# ══════════════════════════════════════════════════════════════
# BAIBEBALO API - Configuration Environment Variables
# ══════════════════════════════════════════════════════════════
# 
# INSTRUCTIONS:
# 1. Copier ce fichier en .env
# 2. Remplir toutes les valeurs marquées comme "changez_moi"
# 3. Ne JAMAIS commiter le fichier .env sur Git
# 4. En production, utiliser des valeurs fortes et uniques
#
# ══════════════════════════════════════════════════════════════

# ================================
# GÉNÉRAL
# ================================
NODE_ENV=development
PORT=3000
API_VERSION=v1

# ================================
# BASE DE DONNÉES POSTGRESQL
# ================================
DB_HOST=localhost
DB_PORT=5432
DB_NAME=baibebalo
DB_USER=postgres
DB_PASSWORD=changez_moi_en_production
DB_MAX_CONNECTIONS=20
DB_IDLE_TIMEOUT=30000

# ================================
# REDIS (Cache & Sessions)
# ================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# ================================
# JWT AUTHENTICATION
# ================================
JWT_SECRET=changez_moi_super_secret_jwt_key_production_256_bits
JWT_EXPIRES_IN=24h
JWT_REFRESH_SECRET=changez_moi_super_secret_refresh_key_production_256_bits
JWT_REFRESH_EXPIRES_IN=7d

# ================================
# SÉCURITÉ
# ================================
BCRYPT_ROUNDS=10
SESSION_SECRET=changez_moi_session_secret_production

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# OTP
OTP_LENGTH=6
OTP_EXPIRY_MINUTES=5
OTP_MAX_ATTEMPTS=3

# ================================
# FIREBASE (NOTIFICATIONS PUSH)
# ================================
FIREBASE_PROJECT_ID=baibebalo-project-id
FIREBASE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nVOTRE_CLE_PRIVEE\n-----END PRIVATE KEY-----\n"
FIREBASE_CLIENT_EMAIL=firebase-adminsdk@baibebalo.iam.gserviceaccount.com
FIREBASE_SERVICE_ACCOUNT_PATH=./config/firebase-service-account.json

# ================================
# SMS (Choisir UN provider principal)
# ================================
SMS_PROVIDER=dev
# Options: dev, twilio, nexah, orange

# === Twilio (International) ===
TWILIO_ACCOUNT_SID=ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
TWILIO_AUTH_TOKEN=votre_auth_token
TWILIO_PHONE_NUMBER=+1234567890

# === Nexah (Côte d'Ivoire) ===
NEXAH_API_KEY=votre_nexah_api_key
NEXAH_SENDER_ID=BAIBEBALO
NEXAH_ENDPOINT=https://api.nexah.net/api/v1/sms/send

# === Orange SMS API (Côte d'Ivoire) ===
ORANGE_SMS_CLIENT_ID=votre_orange_client_id
ORANGE_SMS_CLIENT_SECRET=votre_orange_client_secret
ORANGE_SMS_SENDER=BAIBEBALO
ORANGE_SMS_TOKEN_URL=https://api.orange.com/oauth/v3/token
ORANGE_SMS_SEND_URL=https://api.orange.com/smsmessaging/v1/outbound

# ================================
# EMAIL (SMTP)
# ================================
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_SECURE=false
EMAIL_USER=votre_email@gmail.com
EMAIL_PASSWORD=votre_mot_de_passe_application
EMAIL_FROM_NAME=BAIBEBALO
EMAIL_FROM_ADDRESS=noreply@baibebalo.ci

# ================================
# PAIEMENTS MOBILE MONEY
# ================================

# === Orange Money CI ===
ORANGE_MONEY_BASE_URL=https://api.orange.com/orange-money-webpay/ci/v1
ORANGE_MONEY_MERCHANT_ID=votre_merchant_id
ORANGE_MONEY_API_KEY=votre_orange_money_api_key
ORANGE_MONEY_API_SECRET=votre_orange_money_secret
ORANGE_MONEY_CALLBACK_URL=https://api.baibebalo.ci/api/v1/webhooks/orange-money

# === MTN Mobile Money CI ===
MTN_MOMO_BASE_URL=https://proxy.momoapi.mtn.ci
MTN_MOMO_USER_ID=votre_mtn_user_id
MTN_MOMO_API_KEY=votre_mtn_api_key
MTN_MOMO_SUBSCRIPTION_KEY=votre_mtn_subscription_key
MTN_MOMO_CALLBACK_URL=https://api.baibebalo.ci/api/v1/webhooks/mtn-momo
MTN_MOMO_ENVIRONMENT=sandbox
# Options: sandbox, production

# === Moov Money CI ===
MOOV_MONEY_BASE_URL=https://api.moov-africa.ci
MOOV_MONEY_MERCHANT_ID=votre_moov_merchant_id
MOOV_MONEY_API_KEY=votre_moov_api_key
MOOV_MONEY_CALLBACK_URL=https://api.baibebalo.ci/api/v1/webhooks/moov-money

# === Agrégateur (Optionnel) ===
# CinetPay
CINETPAY_API_KEY=votre_cinetpay_api_key
CINETPAY_SITE_ID=votre_site_id
CINETPAY_SECRET_KEY=votre_secret_key
CINETPAY_NOTIFY_URL=https://api.baibebalo.ci/api/v1/webhooks/cinetpay

# ================================
# STOCKAGE FICHIERS
# ================================

# === AWS S3 ===
AWS_ACCESS_KEY_ID=AKIAXXXXXXXXXXXXXXXX
AWS_SECRET_ACCESS_KEY=votre_aws_secret_key
AWS_REGION=eu-west-1
AWS_S3_BUCKET=baibebalo-uploads
AWS_S3_PUBLIC_URL=https://baibebalo-uploads.s3.eu-west-1.amazonaws.com

# === Cloudinary (Alternative recommandée) ===
CLOUDINARY_CLOUD_NAME=votre_cloudinary_name
CLOUDINARY_API_KEY=votre_cloudinary_api_key
CLOUDINARY_API_SECRET=votre_cloudinary_api_secret
CLOUDINARY_UPLOAD_PRESET=baibebalo_preset

# === Stockage local (Développement) ===
UPLOAD_DIR=./uploads
MAX_FILE_SIZE=5242880
# 5MB en bytes

# ================================
# GOOGLE MAPS API
# ================================
GOOGLE_MAPS_API_KEY=AIzaSyXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
GOOGLE_MAPS_GEOCODING_API=https://maps.googleapis.com/maps/api/geocode/json
GOOGLE_MAPS_DIRECTIONS_API=https://maps.googleapis.com/maps/api/directions/json
GOOGLE_MAPS_PLACES_API=https://maps.googleapis.com/maps/api/place/nearbysearch/json

# ================================
# URLS & CORS
# ================================
API_URL=http://localhost:3000
CLIENT_APP_URL=http://localhost:3001
ADMIN_PANEL_URL=http://localhost:3002
WEBHOOK_BASE_URL=http://localhost:3000/api/v1/webhooks

# CORS (virgule séparée)
CORS_ORIGIN=http://localhost:3001,http://localhost:3002,http://localhost:19006

# ================================
# BUSINESS LOGIC
# ================================

# === Commissions & Frais ===
COMMISSION_RATE_RESTAURANT=15
# Pourcentage (15%)

COMMISSION_RATE_DELIVERY=30
# Part plateforme sur frais de livraison (30%)

DEFAULT_DELIVERY_FEE=500
# FCFA

DELIVERY_FEE_PER_KM=100
# FCFA par km supplémentaire

# === Limites ===
MIN_ORDER_AMOUNT=1000
# FCFA

MAX_ORDER_AMOUNT=500000
# FCFA

MIN_PAYOUT_AMOUNT=5000
# Minimum pour retrait livreur/restaurant

MAX_DELIVERY_RADIUS_KM=10
# Rayon maximum de livraison

MAX_ORDER_ITEMS=50
# Nombre max d'articles par commande

MAX_CANCELLATIONS_PER_DAY=3
# Par utilisateur

# === Timeouts ===
ORDER_ACCEPTANCE_TIMEOUT=120
# Secondes (2 minutes)

DELIVERY_ACCEPTANCE_TIMEOUT=30
# Secondes

ORDER_PREPARATION_TIME_DEFAULT=25
# Minutes

# === Programme de fidélité ===
LOYALTY_POINTS_PER_100_FCFA=1
# 1 point pour 100 FCFA dépensés

LOYALTY_POINTS_EXPIRY_MONTHS=6
# Expiration après 6 mois d'inactivité

# === Parrainage ===
REFERRER_REWARD_POINTS=500
# Points pour le parrain

REFEREE_FIRST_ORDER_DISCOUNT_PERCENT=50
# -50% première commande filleul

# ================================
# CRON JOBS
# ================================
ENABLE_CRON_JOBS=true

# Planification (cron syntax)
CRON_AUTO_CANCEL_ORDERS=*/5 * * * *
# Toutes les 5 minutes

CRON_DAILY_REPORTS=0 23 * * *
# 23h chaque jour

CRON_CLEANUP_OLD_LOGS=0 3 * * 0
# 3h chaque dimanche

CRON_UPDATE_RATINGS=0 */6 * * *
# Toutes les 6 heures

# ================================
# LOGGING
# ================================
LOG_LEVEL=info
# Options: error, warn, info, http, debug

LOG_MAX_SIZE=5242880
# 5MB

LOG_MAX_FILES=5
# Rotation

# ================================
# FEATURE TOGGLES
# ================================
FEATURE_EMAIL_ENABLED=true
FEATURE_SMS_ENABLED=true
FEATURE_PUSH_ENABLED=true
FEATURE_PAYMENT_ENABLED=true
FEATURE_MOBILE_MONEY_ENABLED=true
FEATURE_LOYALTY_PROGRAM_ENABLED=true
FEATURE_REFERRAL_PROGRAM_ENABLED=true

# ================================
# WEBHOOKS
# ================================
WEBHOOK_SECRET=changez_moi_webhook_secret_256_bits
WEBHOOK_TIMEOUT=30000
# 30 secondes

# ================================
# MAINTENANCE
# ================================
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE=Le service est temporairement indisponible pour maintenance.

# ================================
# MONITORING (Optionnel)
# ================================
SENTRY_DSN=
NEW_RELIC_LICENSE_KEY=
DATADOG_API_KEY=

# ================================
# TESTS
# ================================
TEST_DB_NAME=baibebalo_test
TEST_DB_USER=postgres
TEST_DB_PASSWORD=test_password
